<html>
<body>
<h1>Select a subscription plan</h1>
<button id="checkout-button-pro"> Pro subscription (20$/month)</button>
<button id="checkout-button-lite">Lite subscription (5$/month)</button>
<button id="manage-subscription-button">Manage subscription</button>

<script type="text/javascript">
    const checkoutButtonPro = document.getElementById('checkout-button-pro');

    checkoutButtonPro.addEventListener('click', async () => {
        const priceId = 'price_1Rl4rBH13tMkI9AukSn6tc5a';

        const response = await fetch('/create-checkout-session', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ priceId: priceId })
        });

        const session = await response.json();
        window.location.href = session.url;
    });

    const checkoutButtonLite = document.getElementById('checkout-button-lite');

    checkoutButtonLite.addEventListener('click', async () => {
        const priceId = 'price_1Rl4tZH13tMkI9Aucb9Sx1UH';

        const response = await fetch('/create-checkout-session', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ priceId: priceId })
        });

        const session = await response.json();
        window.location.href = session.url;
    });

    const manageSubscriptionButton = document.getElementById('manage-subscription-button');

    manageSubscriptionButton.addEventListener('click', async () => {
        const response = await fetch('/create-customer-portal-session', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
        });

        const portalSession = await response.json();

        window.location.href = portalSession.url;
    });
</script>
</body>
</html>